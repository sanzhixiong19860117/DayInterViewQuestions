# tcp和udp的区别和应用场景。如何实现断点续传？

区别

- 可靠性、连接性、报文、传输效率、多点通信。

应用场景

数据准确性要求高的用tcp

断点续传，客户端向服务端发送文件，tcp为例：

1. 客户端文件分块，假设文件3.3M，一个块1M，总共有4个块。
2. 客户端发送 【文件信息标识，文件名，文件大小，文件MD5】，服务端确认。如果服务端没有，服务端新建【文件名.后缀名.loading】；如果服务端已经有了【文件名.后缀名.loading】，计算块序号，让客户端从块序号开始；如果服务端有了【文件名.后缀名】，比对MD5，如果一样，客户端就不用发数据了，如果不一样，需要进行步骤3。
3. 客户端发送【块标识，块MD5，块内容】，服务端对块内容进行MD5，跟客户端发过来的MD5进行对比。MD5一样就通过。不一样，需要客户端重发。
4. 客户端重复步骤3，直到最后一个块发送成功。
5. 服务端修改文件名。把【文件名.后缀名.loading】改成【文件名.后缀名】。断点续传的答案是临时写的，不完全对